<!-- Remix Icon CDN -->
<link href='https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css' rel="stylesheet"/>

<div id="ch-meme-page" style="min-height: calc(100vh - 6rem); width:100%; padding:40px 28px; box-sizing:border-box; font-family:Arial, sans-serif; background: linear-gradient(180deg,#fbfbff, #ffffff);">

  <header style="max-width:1200px; margin:0 auto 28px; text-align:center;">
    <h1 style="font-size:2rem; margin:0 0 8px; color:#2b2b6b; letter-spacing:-0.5px;">ðŸ¤© Trending Memes Hub</h1>
    <p style="margin:0; color:#555; font-size:1rem; max-width:900px; margin-left:auto; margin-right:auto;">
      Fresh, relatable and savage â€” scroll the top picks that everyone's sharing today. Use search or filter to find your vibe.
    </p>
  </header>

  <div style="max-width:1200px; margin:18px auto 26px; display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap;">
    <input id="ch-meme-search" type="search" placeholder="Search memes..." 
           style="flex:1 1 360px; min-width:220px; padding:12px 14px; border-radius:10px; border:1px solid #e6e6ef; box-shadow:0 4px 12px rgba(79,70,229,0.06); outline:none;"/>
    <button id="ch-meme-clear" style="padding:11px 16px; border-radius:10px; border:1px solid #ddd; background:#fff; cursor:pointer;">Clear</button>
  </div>

  <!-- Meme Grid -->
  <main style="max-width:1200px; margin:0 auto;">
    <div id="ch-meme-grid" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:22px;">
      <!-- memes dynamically load here -->
    </div>

    <!-- Load more -->
    <div style="text-align:center; margin-top:28px;">
      <button id="ch-meme-loadmore" style="padding:12px 26px; background:#4f46e5; color:#fff; border-radius:12px; border:none; font-weight:700; cursor:pointer;">Browse More Memes ðŸš€</button>
    </div>
  </main>
</div>

<script>
(async function(){
  const grid = document.getElementById('ch-meme-grid');
  const search = document.getElementById('ch-meme-search');
  const clear = document.getElementById('ch-meme-clear');
  let allMemes = [];

  async function fetchMemes(count=4){
    const res = await fetch(`https://meme-api.com/gimme/${count}`);
    const data = await res.json();
    return data.memes || [];
  }

  function renderMemes(memes){
    grid.innerHTML = "";
    memes.forEach(m => {
      const card = document.createElement("article");
      card.className = "ch-meme-card";
      card.style.cssText = "background:#fff; border-radius:14px; overflow:hidden; box-shadow:0 10px 30px rgba(16,24,40,0.06); transition:transform .22s, box-shadow .22s;";
      card.innerHTML = `
        <div style="width:100%; height:170px; overflow:hidden; background:#eee;">
          <img src="${m.url}" alt="${m.title}" style="width:100%; height:100%; object-fit:cover; display:block;">
        </div>
        <div style="padding:14px 16px;">
          <h3 style="margin:0 0 6px; font-size:1.05rem; color:#16162b;">${m.title}</h3>
          <p style="margin:0 0 12px; color:#666; font-size:0.92rem; line-height:1.4;">From r/${m.subreddit}</p>
          <div style="display:flex; gap:8px; align-items:center;">
            <a href="${m.postLink}" target="_blank" style="flex:1; text-align:center; padding:9px 12px; border-radius:10px; border:1px solid #e9e9f5; background:#fff; cursor:pointer; text-decoration:none; color:#333;">Open</a>
            <button onclick="navigator.clipboard.writeText('${m.url}')" style="padding:9px 12px; border-radius:10px; border:none; background:#4f46e5; color:#fff; cursor:pointer;"><i class="ri-file-copy-line"></i> Copy URL</button>
          </div>
        </div>`;
      grid.appendChild(card);

      // hover lift
      card.addEventListener("mouseenter", ()=> card.style.transform="translateY(-6px)");
      card.addEventListener("mouseleave", ()=> card.style.transform="translateY(0)");
    });
  }

  function applySearch(){
    const q = search.value.trim().toLowerCase();
    const filtered = allMemes.filter(m => m.title.toLowerCase().includes(q) || m.subreddit.toLowerCase().includes(q));
    renderMemes(filtered);
  }

  // first load
  allMemes = await fetchMemes(6);
  renderMemes(allMemes);

  // search + clear
  search.addEventListener("input", applySearch);
  clear.addEventListener("click", ()=>{ search.value=""; renderMemes(allMemes); });

  // load more
  document.getElementById("ch-meme-loadmore").addEventListener("click", async ()=>{
    const newMemes = await fetchMemes(4);
    allMemes = allMemes.concat(newMemes);
    renderMemes(allMemes);
  });
})();
</script>
